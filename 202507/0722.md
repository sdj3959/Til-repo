# 0722 Spring Boot íŒŒì¼ ì—…ë¡œë“œ & SQL ì •ë¦¬

---

## ğŸ“ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ (Spring Boot)

### âœ… ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ

* ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ `MultipartFile`ë¡œ ë°›ì•„ ì²˜ë¦¬
* UUIDë¥¼ í™œìš©í•´ íŒŒì¼ëª… ì¤‘ë³µ ë°©ì§€
* ì—…ë¡œë“œëœ íŒŒì¼ì€ ì„¤ì •í•œ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì €ì¥

```java
@PostMapping("/uploads")
public ResponseEntity<?> uploadSingleFile(@RequestParam("profile") MultipartFile originFile) {
    String fileName = UUID.randomUUID().toString() + í™•ì¥ì;
    originFile.transferTo(ì €ì¥ê²½ë¡œ);
    return ResponseEntity.ok("OK!!");
}
```

### âœ… ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ

* ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ì„ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë°›ì•„ ë°˜ë³µ ì €ì¥

```java
@PostMapping("/uploads-multi")
public ResponseEntity<?> uploadMultipleFile(@RequestParam("profiles") List<MultipartFile> originFiles) {
    for (MultipartFile file : originFiles) {
        file.transferTo(ì €ì¥ê²½ë¡œ);
    }
    return ResponseEntity.ok("OK!!");
}
```

### âœ… íŒŒì¼ ì ‘ê·¼ ê²½ë¡œ ì„¤ì •

* `WebMvcConfigurer`ì˜ `addResourceHandlers()`ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ì™¸ë¶€ ê²½ë¡œì˜ íŒŒì¼ì— ì ‘ê·¼ í—ˆìš©

```java
registry.addResourceHandler("/uploads/**")
        .addResourceLocations("file:" + fileUploadConfig.getLocation());
```

---

## ğŸ“˜ SQL í•¨ìˆ˜ ë³µìŠµ

### âœ… ë¬¸ìì—´ í•¨ìˆ˜

| í•¨ìˆ˜                            | ì„¤ëª…            |
| ----------------------------- | ------------- |
| `UPPER(column)`               | ëŒ€ë¬¸ìë¡œ ë³€í™˜       |
| `LOWER(column)`               | ì†Œë¬¸ìë¡œ ë³€í™˜       |
| `INITCAP(column)`             | ê° ë‹¨ì–´ ì²« ê¸€ì ëŒ€ë¬¸ì |
| `LENGTH(column)`              | ë¬¸ìì—´ ê¸¸ì´        |
| `INSTR(column, 'ë¬¸ì')`         | íŠ¹ì • ë¬¸ìì˜ ìœ„ì¹˜     |
| `SUBSTR(column, ì‹œì‘, ê¸¸ì´)`      | ë¬¸ìì—´ ì¶”ì¶œ        |
| `CONCAT(a, b)`                | ë¬¸ìì—´ ì—°ê²°        |
| `REPLACE(column, 'ê¸°ì¡´', 'ë³€ê²½')` | ë¬¸ìì—´ ë³€ê²½        |
| `LPAD(column, ê¸¸ì´, 'ë¬¸ì')`      | ì™¼ìª½ ì±„ì›€         |
| `RPAD(column, ê¸¸ì´, 'ë¬¸ì')`      | ì˜¤ë¥¸ìª½ ì±„ì›€        |

### âœ… ìˆ˜í•™ í•¨ìˆ˜

| í•¨ìˆ˜          | ì„¤ëª…               |
| ----------- | ---------------- |
| `ROUND(ìˆ«ì)` | ë°˜ì˜¬ë¦¼              |
| `TRUNC(ìˆ«ì)` | ë²„ë¦¼               |
| `CEIL(ìˆ«ì)`  | ì˜¬ë¦¼               |
| `FLOOR(ìˆ«ì)` | ë‚´ë¦¼               |
| `MOD(a, b)` | ë‚˜ë¨¸ì§€ (ì§/í™€ìˆ˜ êµ¬ë¶„ ê°€ëŠ¥) |

### âœ… ë‚ ì§œ í•¨ìˆ˜

| í•¨ìˆ˜                     | ì„¤ëª…          |
| ---------------------- | ----------- |
| `SYSDATE`              | í˜„ì¬ ì‹œìŠ¤í…œ ì‹œê°„   |
| `TO_CHAR(date, 'í˜•ì‹')`  | ë‚ ì§œë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜ |
| `TO_DATE('ë¬¸ìì—´', 'í˜•ì‹')` | ë¬¸ìì—´ì„ ë‚ ì§œë¡œ ë³€í™˜ |

* ì˜ˆ: `TO_CHAR(registration_date, 'YYYY-MM-DD')`

### âœ… NULL ì²˜ë¦¬ í•¨ìˆ˜

| í•¨ìˆ˜                     | ì„¤ëª…                          |
| ---------------------- | --------------------------- |
| `NVL(a, b)`            | aê°€ NULLì´ë©´ b ë°˜í™˜              |
| `NVL2(a, b, c)`        | aê°€ NULLì´ ì•„ë‹ˆë©´ b, NULLì´ë©´ c ë°˜í™˜ |
| `NULLIF(a, b)`         | aì™€ bê°€ ê°™ìœ¼ë©´ NULL ë°˜í™˜, ë‹¤ë¥´ë©´ a ë°˜í™˜ |
| `COALESCE(a, b, c...)` | ê°€ì¥ ë¨¼ì € NULLì´ ì•„ë‹Œ ê°’ ë°˜í™˜         |

### âœ… ì¡°ê±´ í•¨ìˆ˜: CASE

```sql
CASE
  WHEN ì¡°ê±´ THEN ê²°ê³¼
  WHEN ì¡°ê±´ THEN ê²°ê³¼
  ELSE ê¸°ë³¸ê°’
END
```

* ê°€ì… ì—°ë„ì— ë”°ë¥¸ ìœ ì € ë“±ê¸‰ ë‚˜ëˆ„ê¸° ì˜ˆì‹œ:

```sql
CASE
  WHEN ë“±ë¡ë…„ë„ >= 2023 THEN 'ìƒˆì‹¹ ìœ ì €'
  WHEN ë“±ë¡ë…„ë„ >= 2021 THEN 'ê¸°ì¡´ ìœ ì €'
  ELSE 'ê³ ì¸ë¬¼ ìœ ì €'
END
```

---

## âœ… ì—°ìŠµ ë¬¸ì œ ì˜ˆì‹œ ìš”ì•½

1. **TO_CHARë¡œ ë‚ ì§œ í¬ë§· ë°”ê¾¸ê¸°**
   `'2023ë…„ 01ì›” 01ì¼ (ì¼ìš”ì¼)'` í˜•íƒœë¡œ ë³€í™˜

2. **NVLë¡œ NULL ëŒ€ì²´**
   manager_idê°€ NULLì´ë©´ 'ìµœìƒìœ„ ê´€ë¦¬ì' ì¶œë ¥

3. **CASEë¡œ í™œë™ ìƒíƒœ êµ¬ë¶„**
   ìµœê·¼ ë¡œê·¸ì¸ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ 'ìµœê·¼ í™œë™ ìœ ì €' ë˜ëŠ” 'íœ´ë©´ ìœ ì €'

4. **MOD + CASEë¡œ ëŒ“ê¸€ êµ¬ë¶„**
   ì§ìˆ˜ comment_id -> 'ì§ìˆ˜ ëŒ“ê¸€', í™€ìˆ˜ -> 'í™€ìˆ˜ ëŒ“ê¸€'

---

## ğŸ§  ìš”ì•½

* Spring Bootì—ì„œëŠ” MultipartFileë¡œ íŒŒì¼ì„ ì—…ë¡œë“œ ë°›ê³  UUIDë¡œ ì´ë¦„ ì¤‘ë³µ ë°©ì§€
* SQLì˜ ë‹¤ì–‘í•œ í•¨ìˆ˜ë“¤ì„ í™œìš©í•˜ë©´ ë¬¸ìì—´, ìˆ«ì, ë‚ ì§œ, NULL ì²˜ë¦¬, ì¡°ê±´ êµ¬ë¬¸ì„ ì •êµí•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆìŒ
* CASEë¬¸ì€ ì¡°ê±´ë³„ë¡œ ë‹¤ë¥¸ ê°’ì„ í‘œí˜„í•  ë•Œ ìœ ìš©í•¨
