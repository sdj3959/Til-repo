# 0715 í•™ìŠµ ì •ë¦¬: Spring Boot ì‹¤ìŠµ - JSON ìš”ì²­/ì‘ë‹µ, Member & Feedback API, SSR/JSP

## âœ… 1. Member & Feedback REST API

### ğŸ“Œ MemberController (v3-2)

* JSON ê¸°ë°˜ POST ìš”ì²­ìœ¼ë¡œ íšŒì› ë“±ë¡
* `UUID`ë¡œ ìœ ì € ê³ ìœ  ì‹ë³„ì ìƒì„±
* `@RequestBody` ì‚¬ìš©

```java
@PostMapping
public String join(@RequestBody Member member) {
    member.setUid(UUID.randomUUID().toString());
    memberStore.put(member.getUid(), member);
    return "ìƒˆë¡œìš´ ë©¤ë²„ê°€ ìƒì„±ë¨! - nickname: " + member.getNickname();
}
```

* `GET /api/v3-2/members` ë¡œ ì „ì²´ íšŒì› ì¡°íšŒ

### ğŸ“Œ FeedbackController

* í”¼ë“œë°± ë“±ë¡ ì‹œ POST ìš”ì²­ìœ¼ë¡œ ê°ì²´ ì „ë‹¬
* `Math.random()` ìœ¼ë¡œ id ë¶€ì—¬ (ê°„ë‹¨ ì²˜ë¦¬)

```java
@PostMapping
public String createFeedback(@RequestBody Feedback feedback) {
    feedback.setId((long) (Math.random() * 1000000 + 1));
    feedbackList.add(feedback);
    return "Feedback created: " + feedback;
}
```

* `GET /api/v3-2/feedback` ìœ¼ë¡œ ì „ì²´ í”¼ë“œë°± ì¡°íšŒ

---

## âœ… 2. MemberController (v3-3): ResponseEntity í™œìš©

### ğŸ“Œ ì˜ˆì™¸ ì‘ë‹µ ì²˜ë¦¬

```java
if (member.getAccount().isBlank()) {
    return ResponseEntity
        .badRequest()
        .body("ê³„ì •ì€ í•„ìˆ˜ê°’ì…ë‹ˆë‹¤.");
}
```

### ğŸ“Œ ì‘ë‹µ í—¤ë” ì¶”ê°€ ë° JSON ì‘ë‹µ

```java
HttpHeaders headers = new HttpHeaders();
headers.add("my-pet", "cat");
headers.add("hobby", "swimming");

return ResponseEntity
    .ok()
    .headers(headers)
    .body(memberList);
```

### ğŸ“Œ ë‹¨ì¼ íšŒì› ì¡°íšŒ (PathVariable)

```java
@GetMapping("/{account}")
public ResponseEntity<?> findOne(@PathVariable String account) {
    Member found = ...;
    return ResponseEntity.ok(found);
}
```

---

## âœ… 3. CORS ì„¤ì • (ì „ì—­ ì„¤ì •)

* íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ì—ì„œ API í˜¸ì¶œ í—ˆìš©

```java
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/v3-3/*")
                .allowedOrigins("https://127.0.0.1:5500")
                .allowedMethods("GET")
                .allowedHeaders("*");
    }
}
```

---

## âœ… 4. SSR - JSP & ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§

### ğŸ“Œ PetController + JSP

```java
@GetMapping("/pet-page")
public String petPage(Model model) {
    model.addAttribute("petList", petList);
    return "chap4-1/pet";
}
```

### ğŸ“Œ pet.jsp

```jsp
<c:forEach var="pet" items="${petList}">
    <li>${pet.name}, ${pet.kind}, ${pet.age}ì‚´, ${pet.injection}</li>
</c:forEach>
```

---

## âœ… 5. SSR - Thymeleaf

### ğŸ“Œ ThymeleafController

@GetMapping("/hobby-page") public String hoobyPage(Model model) {     model.addAttribute("username", "ë˜ì¹˜");     model.addAttribute("hobbies", List.of("ë™ìƒ ê´´ë¡­íˆê¸°", "í­ì‹í•˜ê¸°"));     return "hobby"; }

### ğŸ“Œ hobby.html

```html
<h2 th:text="${username}"></h2>
<li th:each="hobby : ${hobbies}" th:text="${hobby}"></li>
```

---

## âœ… ìš”ì•½

* `@RestController` ì™€ `@ResponseBody` ê¸°ë°˜ì˜ JSON API ì²˜ë¦¬ë²• í•™ìŠµ
* `@RequestBody`, `@PathVariable`, `@RequestParam` í™œìš©ë²• ìµí˜
* `ResponseEntity`ë¥¼ í™œìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬ì™€ ì»¤ìŠ¤í…€ ì‘ë‹µ êµ¬ì„±
* JSPì™€ Thymeleafë¥¼ í†µí•œ SSR ë°©ì‹ í™”ë©´ ë Œë”ë§ ë°©ë²• ìµí˜
