## 1115 Spring Boot μ‹¬ν™”: μ¤μΌ€μ¤„λ§, μΊμ‹±, λ¨λ‹ν„°λ§

---

### β… 1. μ¤μΌ€μ¤„λ§ (Scheduling)κ³Ό `@Scheduled`

*   **μ¤μΌ€μ¤„λ§**μ΄λ€ μ• ν”λ¦¬μΌ€μ΄μ… λ‚΄μ—μ„ νΉμ • μ‘μ—…μ„ **λ―Έλ¦¬ μ •ν•΄μ§„ μ‹κ°„μ— λλ” μ£ΌκΈ°μ μΌλ΅ μλ™μΌλ΅ μ‹¤ν–‰**ν•λ„λ΅ λ§λ“λ” κΈ°λ¥μ…λ‹λ‹¤.

*   **μ£Όμ” μ‚¬μ© μ‚¬λ΅€**:
    *   λ§¤μΌ μμ •μ— ν†µκ³„ λ°μ΄ν„° λ°°μΉ(Batch) μ‘μ—… μ‹¤ν–‰
    *   1μ‹κ°„λ§λ‹¤ μ™Έλ¶€ APIλ¥Ό νΈμ¶ν•μ—¬ λ°μ΄ν„° λ™κΈ°ν™”
    *   λ§¤μ£Ό μ›”μ”μΌ μ•„μΉ¨μ— λ¦¬ν¬νΈ μ΄λ©”μΌ λ°μ†΅

#### β• Springμ `@Scheduled` μ–΄λ…Έν…μ΄μ…

*   Springμ€ `@Scheduled` μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ μ¤μΌ€μ¤„λ§μ„ λ§¤μ° κ°„λ‹¨ν•κ² κµ¬ν„ν•  μ μλ„λ΅ μ§€μ›ν•©λ‹λ‹¤.

*   **μ‚¬μ©λ²•**:
    1.  **`@EnableScheduling`**: λ©”μΈ μ• ν”λ¦¬μΌ€μ΄μ… ν΄λμ¤μ— `@EnableScheduling` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬ μ¤μΌ€μ¤„λ§ κΈ°λ¥μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.
    2.  **`@Scheduled`**: μ£ΌκΈ°μ μΌλ΅ μ‹¤ν–‰ν•κ³  μ‹¶μ€ λ©”μ„λ“μ— `@Scheduled` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄κ³ , μ‹¤ν–‰ μ£ΌκΈ°λ¥Ό μ„¤μ •ν•©λ‹λ‹¤.

*   **μ£Όμ” μ†μ„±**:
    *   **`fixedRate`**: μ΄μ „ μ‘μ—…μ **μ‹μ‘ μ‹κ°„**μ„ κΈ°μ¤€μΌλ΅, μ •ν•΄μ§„ μ‹κ°„(λ°€λ¦¬μ΄)λ§λ‹¤ μ‘μ—…μ„ μ‹¤ν–‰ν•©λ‹λ‹¤. (μ΄μ „ μ‘μ—…μ΄ λλ‚μ§€ μ•μ•„λ„ μ‹κ°„μ΄ λλ©΄ λ‹¤μ μ‘μ—… μ‹μ‘ μ‹λ„)
    *   **`fixedDelay`**: μ΄μ „ μ‘μ—…μ΄ **λλ‚ μ‹κ°„**μ„ κΈ°μ¤€μΌλ΅, μ •ν•΄μ§„ μ‹κ°„(λ°€λ¦¬μ΄)μ΄ μ§€λ‚ ν›„μ— λ‹¤μ μ‘μ—…μ„ μ‹¤ν–‰ν•©λ‹λ‹¤. (μ‘μ—… μ‹κ°„μ΄ κΈΈμ–΄μ§€λ©΄ μ‹¤ν–‰ μ£ΌκΈ°λ„ κΈΈμ–΄μ§)
    *   **`cron`**: Cron ν‘ν„μ‹μ„ μ‚¬μ©ν•μ—¬ λ§¤μ° μ μ—°ν•κ³  λ³µμ΅ν• μ‹κ°„ μμ•½μ΄ κ°€λ¥ν•©λ‹λ‹¤. (e.g., "λ§¤μ£Ό μ›”~κΈ μ¤μ „ 9μ‹ 30λ¶„μ— μ‹¤ν–‰")

    ```java
    @Component
    public class MyScheduler {

        // 5μ΄(5000ms)λ§λ‹¤ μ‹¤ν–‰ (μ΄μ „ μ‘μ—… μ‹μ‘ μ‹κ°„ κΈ°μ¤€)
        @Scheduled(fixedRate = 5000)
        public void runEvery5Seconds() {
            System.out.println("μ¤μΌ€μ¤„λ§λ μ‘μ—… μ‹¤ν–‰: " + LocalDateTime.now());
        }

        // λ§¤μΌ μ¤μ „ 4μ‹μ— μ‹¤ν–‰
        @Scheduled(cron = "0 0 4 * * *")
        public void runAt4AM() {
            // ... μΌμΌ ν†µκ³„ μ§‘κ³„ λ΅μ§ ...
        }
    }
    ```

---

### β… 2. μΊμ‹± (Caching)κ³Ό `@Cacheable`

*   **μΊμ‹±**μ€ μμ£Ό μ‚¬μ©λμ§€λ§ μ λ³€ν•μ§€ μ•λ” λ°μ΄ν„°λ‚, κ³„μ‚° λΉ„μ©μ΄ λΉ„μ‹Ό μ‘μ—…μ κ²°κ³Όλ¥Ό **λ©”λ¨λ¦¬μ™€ κ°™μ€ λΉ λ¥Έ μ €μ¥μ†μ— μ„μ‹λ΅ μ €μ¥**ν•΄λ‘κ³ , λ‹¤μ μ”μ²­ μ‹μ—λ” μ‹¤μ  μ‘μ—…μ„ λ‹¤μ‹ μν–‰ν•λ” λ€μ‹  μ €μ¥λ κ²°κ³Όλ¥Ό μ¦‰μ‹ λ°ν™ν•λ” κΈ°μ μ…λ‹λ‹¤.

*   **ν•µμ‹¬ λ©ν‘**: λ°μ΄ν„°λ² μ΄μ¤λ‚ μ™Έλ¶€ APIμ— λ€ν• λ°λ³µμ μΈ νΈμ¶μ„ μ¤„μ—¬, μ• ν”λ¦¬μΌ€μ΄μ…μ **μ‘λ‹µ μ†λ„λ¥Ό ν–¥μƒ**μ‹ν‚¤κ³  **μ‹μ¤ν… λ¶€ν•λ¥Ό κ°μ†**μ‹ν‚µλ‹λ‹¤.

#### β• Springμ μΊμ‹ μ¶”μƒν™”μ™€ μ–΄λ…Έν…μ΄μ…

*   Springμ€ `@Cacheable`, `@CacheEvict` λ“±μ μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄, κΈ°λ° κΈ°μ (EhCache, Caffeine, Redis λ“±)μ— μƒκ΄€μ—†μ΄ μΌκ΄€λ λ°©μ‹μΌλ΅ μΊμ‹±μ„ μ μ©ν•  μ μλ„λ΅ **μΊμ‹ μ¶”μƒν™”**λ¥Ό μ κ³µν•©λ‹λ‹¤.

*   **μ‚¬μ©λ²•**:
    1.  **`@EnableCaching`**: λ©”μΈ μ• ν”λ¦¬μΌ€μ΄μ… ν΄λμ¤μ— `@EnableCaching` μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬ μΊμ‹± κΈ°λ¥μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.
    2.  **`@Cacheable`**: μΊμ‹±μ„ μ μ©ν•κ³  μ‹¶μ€ λ©”μ„λ“μ— λ¶™μ…λ‹λ‹¤.
        *   **λ™μ‘ λ°©μ‹**: Springμ€ μ΄ λ©”μ„λ“κ°€ νΈμ¶λ  λ•, λ¨Όμ € μΊμ‹μ— ν•΄λ‹Ή **`key`**μ— λ€ν• κ²°κ³Όκ°€ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
            *   **Cache Hit**: μΊμ‹μ— κ²°κ³Όκ°€ μμΌλ©΄, λ©”μ„λ“λ¥Ό **μ‹¤ν–‰ν•μ§€ μ•κ³ ** μΊμ‹λ κ°’μ„ μ¦‰μ‹ λ°ν™ν•©λ‹λ‹¤.
            *   **Cache Miss**: μΊμ‹μ— κ²°κ³Όκ°€ μ—†μΌλ©΄, λ©”μ„λ“λ¥Ό **μ‹¤ν–‰**ν•κ³ , κ·Έ λ°ν™ κ°’μ„ μΊμ‹μ— μ €μ¥ν• ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•©λ‹λ‹¤.
        *   **`value` (λλ” `cacheNames`)**: μ‚¬μ©ν•  μΊμ‹μ μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤.
        *   **`key`**: μΊμ‹ ν‚¤λ¥Ό μƒμ„±ν•λ” κ·μΉ™μ„ SpEL(Spring Expression Language)λ΅ μ§€μ •ν•©λ‹λ‹¤. μ§€μ •ν•μ§€ μ•μΌλ©΄ λ©”μ„λ“μ νλΌλ―Έν„°λ¥Ό κΈ°λ°μΌλ΅ μλ™ μƒμ„±λ©λ‹λ‹¤.

    ```java
    @Service
    public class ProductService {

        // "products" μΊμ‹μ— #idλ¥Ό ν‚¤λ΅ ν•μ—¬ κ²°κ³Όλ¥Ό μ €μ¥
        @Cacheable(value = "products", key = "#id")
        public Product getProductById(Long id) {
            // μ΄ λ΅κ·Έλ” μµμ΄ νΈμ¶ μ‹μ—λ§ μ°νκ³ , μ΄ν›„μ—λ” μ°νμ§€ μ•μ
            System.out.println("DBμ—μ„ μƒν’ μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤...");
            // ... DBμ—μ„ λ°μ΄ν„°λ¥Ό μ΅°νν•λ” λΉ„μ©μ΄ λΉ„μ‹Ό μ‘μ—… ...
            return productRepository.findById(id).orElse(null);
        }
    }
    ```
*   **κΈ°νƒ€ μΊμ‹ μ–΄λ…Έν…μ΄μ…**:
    *   **`@CachePut`**: λ©”μ„λ“λ¥Ό ν•­μƒ μ‹¤ν–‰ν•κ³ , κ·Έ κ²°κ³Όλ¥Ό μΊμ‹μ— **κ°±μ‹ (update)**ν•©λ‹λ‹¤.
    *   **`@CacheEvict`**: νΉμ • μΊμ‹ ν•­λ©μ„ **μ κ±°(delete)**ν•©λ‹λ‹¤. (e.g., μƒν’ μ •λ³΄κ°€ μμ •λλ©΄ ν•΄λ‹Ή μƒν’μ μΊμ‹λ¥Ό μ‚­μ )

---

### β… 3. μ• ν”λ¦¬μΌ€μ΄μ… λ¨λ‹ν„°λ§: Spring Boot Actuator

*   **Actuator**λ” μ‹¤ν–‰ μ¤‘μΈ Spring Boot μ• ν”λ¦¬μΌ€μ΄μ…μ **μƒνƒλ¥Ό λ¨λ‹ν„°λ§ν•κ³  κ΄€λ¦¬**ν•κΈ° μ„ν• λ‹¤μ–‘ν• **μ—”λ“ν¬μΈνΈ(Endpoints)**λ¥Ό μ κ³µν•λ” ν”„λ΅μ νΈμ…λ‹λ‹¤.

*   **ν•µμ‹¬ λ©ν‘**: μ• ν”λ¦¬μΌ€μ΄μ…μ΄ "μ‚΄μ•„μλ”μ§€", "κ±΄κ°•ν•μ§€", "λ‚΄λ¶€μ μΌλ΅ μ–΄λ–¤ μΌμ΄ μΌμ–΄λ‚κ³  μλ”μ§€"λ¥Ό μ™Έλ¶€μ—μ„ μ‰½κ² ν™•μΈν•  μ μλ„λ΅ ν•©λ‹λ‹¤.

*   **μ‚¬μ©λ²•**: `spring-boot-starter-actuator` μμ΅΄μ„±μ„ μ¶”κ°€ν•κ³ , `application.yml`μ— ν•„μ”ν• μ„¤μ •μ„ μ¶”κ°€ν•κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤.

#### β• μ£Όμ” Actuator μ—”λ“ν¬μΈνΈ

| μ—”λ“ν¬μΈνΈ | μ„¤λ… |
| :--- | :--- |
| **`/actuator/health`** | μ• ν”λ¦¬μΌ€μ΄μ…μ **κ±΄κ°• μƒνƒ**λ¥Ό ν™•μΈν•©λ‹λ‹¤. (DB μ—°κ²°, λ””μ¤ν¬ κ³µκ°„ λ“±) <br> μƒνƒκ°€ μ •μƒμ΄λ©΄ `{"status":"UP"}`μ„ λ°ν™. (λ΅λ“ λ°Έλ°μ„μ ν—¬μ¤ μ²΄ν¬μ— μ£Όλ΅ μ‚¬μ©) |
| **`/actuator/info`** | μ• ν”λ¦¬μΌ€μ΄μ…μ κΈ°λ³Έ μ •λ³΄λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤. (λΉλ“ λ²„μ „, Git μ»¤λ°‹ μ •λ³΄ λ“±) |
| **`/actuator/metrics`** | JVM λ©”λ¨λ¦¬ μ‚¬μ©λ‰, CPU μ‚¬μ©λ¥ , HTTP μ”μ²­ μ λ“± λ‹¤μ–‘ν• **μ„±λ¥ μ§€ν‘(Metric)**λ¥Ό μ κ³µν•©λ‹λ‹¤. |
| **`/actuator/beans`** | Spring μ»¨ν…μ΄λ„μ— λ“±λ΅λ λ¨λ“  **Beanμ λ©λ΅**μ„ λ³΄μ—¬μ¤λ‹λ‹¤. |
| **`/actuator/mappings`** | `@RequestMapping`μΌλ΅ λ§¤ν•‘λ λ¨λ“  **URL μ—”λ“ν¬μΈνΈ λ©λ΅**μ„ λ³΄μ—¬μ¤λ‹λ‹¤. |
| **`/actuator/env`** | μ• ν”λ¦¬μΌ€μ΄μ…μ λ¨λ“  **ν™κ²½ λ³€μ λ° μ„¤μ • μ†μ„±**μ„ λ³΄μ—¬μ¤λ‹λ‹¤. (λ―Όκ° μ •λ³΄ λ…Έμ¶ μ£Όμ) |

*   **λ³΄μ•**: Actuator μ—”λ“ν¬μΈνΈλ” μ• ν”λ¦¬μΌ€μ΄μ…μ λ‚΄λ¶€ μ •λ³΄λ¥Ό λ§μ΄ λ…Έμ¶ν•λ―€λ΅, μ΄μ ν™κ²½μ—μ„λ” λ°λ“μ‹ Spring Security λ“±μ„ ν†µν•΄ μ ‘κ·Όμ„ μ μ–΄ν•κ±°λ‚, ν•„μ”ν• μ—”λ“ν¬μΈνΈλ§ μ™Έλ¶€μ— λ…Έμ¶ν•λ„λ΅ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

---

### π“ μ”μ•½

*   **`@Scheduled`** μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄, νΉμ • μ‘μ—…μ„ **μ£ΌκΈ°μ μΌλ΅ λλ” μ •ν•΄μ§„ μ‹κ°„μ— μλ™μΌλ΅ μ‹¤ν–‰**ν•λ” μ¤μΌ€μ¤„λ§ κΈ°λ¥μ„ μ†μ‰½κ² κµ¬ν„ν•  μ μμµλ‹λ‹¤.
*   **`@Cacheable`** μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄, λΉ„μ©μ΄ λΉ„μ‹Ό λ©”μ„λ“μ κ²°κ³Όλ¥Ό **μΊμ‹μ— μ €μ¥**ν•μ—¬ λ°λ³µμ μΈ μ‹¤ν–‰μ„ λ§‰κ³ , μ• ν”λ¦¬μΌ€μ΄μ…μ **μ‘λ‹µ μ†λ„λ¥Ό ν¬κ² ν–¥μƒ**μ‹ν‚¬ μ μμµλ‹λ‹¤.
*   **Spring Boot Actuator**λ” `/actuator/health`, `/actuator/metrics`μ™€ κ°™μ€ **λ¨λ‹ν„°λ§ μ—”λ“ν¬μΈνΈ**λ¥Ό μ κ³µν•μ—¬, μ‹¤ν–‰ μ¤‘μΈ μ• ν”λ¦¬μΌ€μ΄μ…μ **λ‚΄λ¶€ μƒνƒλ¥Ό μ™Έλ¶€μ—μ„ μ‰½κ² ν™•μΈ**ν•κ³  κ΄€λ¦¬ν•  μ μλ„λ΅ λ•μµλ‹λ‹¤.