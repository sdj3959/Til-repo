## 1106 Spring Boot μ›Ή κ°λ°: Controllerμ™€ REST APIμ κΈ°μ΄

---

### β… 1. Spring MVCμ ν•µμ‹¬: Controllerμ™€ μ”μ²­ λ§¤ν•‘

*   Spring Boot μ›Ή κ°λ°μ€ **Spring MVC** ν”„λ μ„μ›ν¬λ¥Ό κΈ°λ°μΌλ΅ λ™μ‘ν•©λ‹λ‹¤. μ—¬κΈ°μ„ **μ»¨νΈλ΅¤λ¬(Controller)**λ” ν΄λΌμ΄μ–ΈνΈμ HTTP μ”μ²­μ„ κ°€μ¥ λ¨Όμ € λ°›μ•„ μ²λ¦¬ν•λ” **κ΄€λ¬Έ** μ—­ν• μ„ ν•©λ‹λ‹¤.

#### β• μ£Όμ” μ–΄λ…Έν…μ΄μ…

1.  **`@Controller`**:
    *   μ΄ μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν΄λμ¤λ¥Ό Springμ΄ **μ»¨νΈλ΅¤λ¬λ΅ μΈμ‹**ν•κ³ , BeanμΌλ΅ λ“±λ΅ν•μ—¬ κ΄€λ¦¬ν•©λ‹λ‹¤.
    *   μ „ν†µμ μΈ Spring MVCμ—μ„λ” μ£Όλ΅ `ModelAndView` κ°μ²΄λ‚ λ·°(View)μ μ΄λ¦„μ„ λ°ν™ν•μ—¬ HTML νμ΄μ§€λ¥Ό λ λ”λ§ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.

2.  **`@RestController`**:
    *   **`@Controller`μ™€ `@ResponseBody`λ¥Ό ν•©μΉ μ–΄λ…Έν…μ΄μ…**μ…λ‹λ‹¤.
    *   ν„λ€μ μΈ μ›Ή κ°λ°, νΉν **REST API**λ¥Ό λ§λ“¤ λ• μ£Όλ΅ μ‚¬μ©λ©λ‹λ‹¤.
    *   μ΄ μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ μ»¨νΈλ΅¤λ¬μ λ¨λ“  λ©”μ„λ“λ” λ·°λ¥Ό μ°Ύλ” λ€μ‹ , λ°ν™ν•λ” κ°’(κ°μ²΄, λ¬Έμμ—΄ λ“±)μ„ **HTTP μ‘λ‹µ λ³Έλ¬Έ(Body)μ— μ§μ ‘** μ¨μ„ λ³΄λƒ…λ‹λ‹¤. κ°μ²΄λ¥Ό λ°ν™ν•λ©΄, Spring Bootκ°€ μλ™μΌλ΅ **JSON ν•μ‹μΌλ΅ λ³€ν™**ν•μ—¬ μ‘λ‹µν•©λ‹λ‹¤.

3.  **`@RequestMapping`**:
    *   νΉμ • **URL κ²½λ΅**μ™€ μ»¨νΈλ΅¤λ¬μ λ©”μ„λ“λ¥Ό **λ§¤ν•‘(mapping)**ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.
    *   ν΄λμ¤ λ λ²¨μ— λ¶™μ—¬ κ³µν†µ κ²½λ΅λ¥Ό μ§€μ •ν•κ³ , λ©”μ„λ“ λ λ²¨μ— λ¶™μ—¬ μ„Έλ¶€ κ²½λ΅λ¥Ό μ§€μ •ν•  μ μμµλ‹λ‹¤.

4.  **HTTP λ©”μ„λ“λ³„ λ§¤ν•‘ μ–΄λ…Έν…μ΄μ… (μ¶•μ•½ν•)**:
    *   `@RequestMapping`μ„ λ” λ…ν™•ν•κ³  κ°„κ²°ν•κ² μ‚¬μ©ν•κΈ° μ„ν• μ–΄λ…Έν…μ΄μ…λ“¤μ…λ‹λ‹¤.
    *   **`@GetMapping`**: HTTP GET μ”μ²­μ„ μ²λ¦¬ (λ°μ΄ν„° μ΅°ν)
    *   **`@PostMapping`**: HTTP POST μ”μ²­μ„ μ²λ¦¬ (λ°μ΄ν„° μƒμ„±)
    *   **`@PutMapping`**: HTTP PUT μ”μ²­μ„ μ²λ¦¬ (λ°μ΄ν„° μ „μ²΄ μμ •)
    *   **`@PatchMapping`**: HTTP PATCH μ”μ²­μ„ μ²λ¦¬ (λ°μ΄ν„° μΌλ¶€ μμ •)
    *   **`@DeleteMapping`**: HTTP DELETE μ”μ²­μ„ μ²λ¦¬ (λ°μ΄ν„° μ‚­μ )

    ```java
    @RestController
    @RequestMapping("/api/users") // κ³µν†µ κ²½λ΅
    public class UserController {

        @GetMapping("/{userId}") // GET /api/users/{userId}
        public User getUser(@PathVariable Long userId) {
            // ... μ‚¬μ©μ μ΅°ν λ΅μ§ ...
        }

        @PostMapping
        public ResponseEntity<User> createUser(@RequestBody UserCreateRequest request) {
            // ... μ‚¬μ©μ μƒμ„± λ΅μ§ ...
        }
    }
    ```

---

### β… 2. μ”μ²­ λ°μ΄ν„°(Request Data) μ²λ¦¬ν•κΈ°

*   ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ λ°μ΄ν„°λ¥Ό μ»¨νΈλ΅¤λ¬ λ©”μ„λ“μ—μ„ λ°›λ” λ°©λ²•μ€ λ°μ΄ν„°μ μ„μΉμ— λ”°λΌ λ‹¤λ¦…λ‹λ‹¤.

| μ–΄λ…Έν…μ΄μ… | λ°μ΄ν„° μ„μΉ | μ„¤λ… | μμ‹ |
| :--- | :--- | :--- | :--- |
| **`@PathVariable`** | **URL κ²½λ΅** | URL κ²½λ΅μ μΌλ¶€λ¥Ό λ³€μλ΅ λ°›μ. (e.g., `/users/123`) | `@GetMapping("/{id}")` `public User getUser(@PathVariable Long id)` |
| **`@RequestParam`** | **μΏΌλ¦¬ νλΌλ―Έν„°** | URLμ `?` λ’¤μ— μ¤λ” Key-Value μμ„ λ°›μ. (e.g., `/search?keyword=java`) | `@GetMapping("/search")` `public List<Item> search(@RequestParam String keyword)` |
| **`@RequestBody`** | **HTTP Body** | μ”μ²­μ λ³Έλ¬Έμ— λ‹΄κΈ΄ JSON, XML λ“±μ λ°μ΄ν„°λ¥Ό **Java κ°μ²΄(DTO)**λ΅ λ³€ν™ν•μ—¬ λ°›μ. (μ£Όλ΅ POST, PUT μ”μ²­) | `@PostMapping` `public void createUser(@RequestBody UserDto userDto)` |
| **`@ModelAttribute`** | **νΌ λ°μ΄ν„°** | `application/x-www-form-urlencoded` ν•μ‹μ νΌ λ°μ΄ν„°λ¥Ό κ°μ²΄λ΅ λ°”μΈλ”©. (μ£Όλ΅ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ—μ„ μ‚¬μ©) | |

---

### β… 3. REST API (Representational State Transfer)

*   **REST**λ” μ›Ή μ„λΉ„μ¤λ¥Ό μ„¤κ³„ν•κΈ° μ„ν• **μ•„ν‚¤ν…μ² μ¤νƒ€μΌ(μ„¤κ³„ μ›μΉ™)** μ¤‘ ν•λ‚μ…λ‹λ‹¤. RESTμ μ›μΉ™μ„ μ λ”°λ¥΄λ” APIλ¥Ό **RESTful API**λΌκ³  ν•©λ‹λ‹¤.

#### β• RESTμ ν•µμ‹¬ κµ¬μ„± μ”μ†

1.  **μμ› (Resource)**:
    *   APIκ°€ μ κ³µν•λ” λ¨λ“  μ •λ³΄λ” **μμ›**μΌλ΅ κ°„μ£Όλ©λ‹λ‹¤. (e.g., μ‚¬μ©μ, κ²μ‹κΈ€, μƒν’)
    *   μμ›μ€ **URI(Uniform Resource Identifier)**λ¥Ό ν†µν•΄ κ³ μ ν•κ² μ‹λ³„λ©λ‹λ‹¤. (e.g., `/users/123`)
    *   **URIλ” μμ›μ„ ν‘ν„ν•λ” λ° μ§‘μ¤‘ν•΄μ•Ό ν•©λ‹λ‹¤.** (λ™μ‚¬λ³΄λ‹¤λ” λ…μ‚¬ μ‚¬μ©)
        *   **λ‚μ μ**: `/getUsers`, `/createUser`
        *   **μΆ‹μ€ μ**: `/users`

2.  **ν–‰μ„ (Verb)**:
    *   μμ›μ— λ€ν• ν–‰μ„λ” **HTTP λ©”μ„λ“(Verb)**λ¥Ό ν†µν•΄ ν‘ν„ν•©λ‹λ‹¤.
    *   `GET` (μ΅°ν), `POST` (μƒμ„±), `PUT` (μ „μ²΄ μμ •), `DELETE` (μ‚­μ )

3.  **ν‘ν„ (Representation)**:
    *   μμ›μ μƒνƒλ” **JSON**μ΄λ‚ XMLκ³Ό κ°™μ€ ν•μ‹μΌλ΅ ν‘ν„λμ–΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ— μ£Όκ³ λ°›μµλ‹λ‹¤.

#### β• RESTful API μ„¤κ³„μ μ¥μ 

*   **μ§κ΄€μ„±**: URIμ™€ HTTP λ©”μ„λ“λ§ λ΄λ„ APIκ°€ μ–΄λ–¤ λ™μ‘μ„ ν•λ”μ§€ μ‰½κ² μ΄ν•΄ν•  μ μμµλ‹λ‹¤.
*   **λ¬΄μƒνƒμ„± (Stateless)**: κ° μ”μ²­μ€ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό μ €μ¥ν•μ§€ μ•κ³  λ…λ¦½μ μΌλ΅ μ²λ¦¬λ©λ‹λ‹¤. μ΄λ” μ„λ²„μ ν™•μ¥μ„±(Scalability)μ„ λ†’μ—¬μ¤λ‹λ‹¤.
*   **μΌκ΄€μ„±**: μ •ν•΄μ§„ κ·μΉ™μ„ λ”°λ¥΄λ―€λ΅, APIμ ν†µμΌμ„±μ΄ λ†’μ•„μ§€κ³  ν‘μ—…μ΄ μ©μ΄ν•΄μ§‘λ‹λ‹¤.

---

### β… 4. μ‘λ‹µ λ°μ΄ν„°(Response Data) μ²λ¦¬ν•κΈ°: `ResponseEntity`

*   μ»¨νΈλ΅¤λ¬ λ©”μ„λ“λ” λ‹¨μν λ°μ΄ν„° κ°μ²΄λ§ λ°ν™ν•  μλ„ μμ§€λ§, **`ResponseEntity`** κ°μ²΄λ¥Ό μ‚¬μ©ν•λ©΄ λ” μ •κµν• μ‘λ‹µμ„ λ§λ“¤ μ μμµλ‹λ‹¤.

*   **`ResponseEntity`μ μ¥μ **:
    1.  **HTTP μƒνƒ μ½”λ“(Status Code)**λ¥Ό λ…μ‹μ μΌλ΅ μ μ–΄ν•  μ μμµλ‹λ‹¤.
        *   `200 OK` (μ„±κ³µ), `201 CREATED` (μƒμ„± μ„±κ³µ), `400 BAD_REQUEST` (ν΄λΌμ΄μ–ΈνΈ μ¤λ¥), `404 NOT_FOUND` (μμ› μ—†μ), `500 INTERNAL_SERVER_ERROR` (μ„λ²„ μ¤λ¥)
    2.  **HTTP ν—¤λ”(Headers)**λ¥Ό μ§μ ‘ μ„¤μ •ν•  μ μμµλ‹λ‹¤.
    3.  **μ‘λ‹µ λ³Έλ¬Έ(Body)**μ— μ‹¤μ  λ°μ΄ν„°λ¥Ό λ‹΄μ„ μ μμµλ‹λ‹¤.

    ```java
    @PostMapping
    public ResponseEntity<User> createUser(@RequestBody UserCreateRequest request) {
        User newUser = userService.create(request);
        // 201 Created μƒνƒ μ½”λ“μ™€ ν•¨κ» μƒμ„±λ μ‚¬μ©μ μ •λ³΄λ¥Ό μ‘λ‹µ
        return ResponseEntity.status(HttpStatus.CREATED).body(newUser);
    }

    @GetMapping("/{userId}")
    public ResponseEntity<User> getUser(@PathVariable Long userId) {
        try {
            User user = userService.findById(userId);
            // 200 OK μƒνƒ μ½”λ“μ™€ ν•¨κ» μ‚¬μ©μ μ •λ³΄λ¥Ό μ‘λ‹µ
            return ResponseEntity.ok(user);

        } catch (UserNotFoundException e) {
            // μ‚¬μ©μλ¥Ό μ°Ύμ§€ λ»ν• κ²½μ° 404 Not Found μƒνƒ μ½”λ“λ¥Ό μ‘λ‹µ
            return ResponseEntity.notFound().build();
        }
    }
    ```

---

### π“ μ”μ•½

*   **`@RestController`**λ” REST APIλ¥Ό λ§λ“¤κΈ° μ„ν• ν•µμ‹¬ μ–΄λ…Έν…μ΄μ…μΌλ΅, λ°ν™ κ°’μ„ **JSON** ν•νƒλ΅ μ‘λ‹µ λ³Έλ¬Έμ— μ§μ ‘ μ¨μ¤λ‹λ‹¤.
*   ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ λ°μ΄ν„°λ” μ„μΉμ— λ”°λΌ **`@PathVariable`, `@RequestParam`, `@RequestBody`** λ“±μ„ μ‚¬μ©ν•μ—¬ λ°›μµλ‹λ‹¤.
*   **REST API**λ” **μμ›(URI, λ…μ‚¬)**, **ν–‰μ„(HTTP λ©”μ„λ“)**, **ν‘ν„(JSON)**μ΄λΌλ” μ„Έ κ°€μ§€ μ”μ†λ΅ κµ¬μ„±λ μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ…λ‹λ‹¤.
*   **`ResponseEntity`**λ¥Ό μ‚¬μ©ν•λ©΄, λ°μ΄ν„°λΏλ§ μ•„λ‹λΌ **HTTP μƒνƒ μ½”λ“**μ™€ **ν—¤λ”**κΉμ§€ ν¬ν•¨λ ν’λ¶€ν•κ³  λ…ν™•ν• μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό μ μμµλ‹λ‹¤.