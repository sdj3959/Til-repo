## 0815 λ°μ΄ν„°λ² μ΄μ¤ λ¨λΈλ§κ³Ό QueryDSL λ™μ  μΏΌλ¦¬

---

### β… 1. λ°μ΄ν„° λ¨λΈλ§μ ν•µμ‹¬ μ”μ† (SQLD)

*   λ°μ΄ν„° λ¨λΈλ§μ€ ν„μ‹¤ μ„Έκ³„μ μ—…λ¬΄λ¥Ό μ¶”μƒν™”ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ΅°λ΅ μ„¤κ³„ν•λ” κ³Όμ •μΌλ΅, **κ°λ…μ , λ…Όλ¦¬μ , λ¬Όλ¦¬μ ** 3λ‹¨κ³„λ΅ μ§„ν–‰λ©λ‹λ‹¤.

#### β• μ£Όμ” κµ¬μ„± μ”μ†

1.  **μ—”ν„°ν‹° (Entity)**: κ΄€λ¦¬ν•΄μ•Ό ν•  λ°μ΄ν„°μ λ€μƒ(ν…μ΄λΈ”). **μ‹λ³„μ**μ— μν•΄ μ μΌν•κ² κµ¬λ¶„λλ©°, 2κ° μ΄μƒμ **μΈμ¤ν„΄μ¤**(ν–‰)μ™€ **μ†μ„±**(μ»¬λΌ)μ„ κ°€μ§‘λ‹λ‹¤.
2.  **μ†μ„± (Attribute)**: μ—”ν„°ν‹°λ¥Ό μ„¤λ…ν•λ” μµμ† λ°μ΄ν„° λ‹¨μ„(μ»¬λΌ). λ‹¤λ¥Έ μ†μ„±μ—μ„ κ³„μ‚°λλ” **νμƒ μ†μ„±**μ΄λ‚ μ—¬λ¬ κ°’μ„ κ°€μ§ μ μλ” **λ‹¤μ¤‘κ°’ μ†μ„±** λ“±μ€ μ„¤κ³„ μ‹ μ£Όμκ°€ ν•„μ”ν•©λ‹λ‹¤.
3.  **κ΄€κ³„ (Relationship)**: μ—”ν„°ν‹° κ°„μ λ…Όλ¦¬μ  μ—°κ΄€μ„±. **κ΄€κ³„ μ°¨μ(1:1, 1:N, M:N)**μ™€ **κ΄€κ³„ μ„ νƒμ„±(ν•„μ/μ„ νƒ)**μΌλ΅ ν‘ν„λ©λ‹λ‹¤. M:N κ΄€κ³„λ” κ΄€κ³„ν• DBμ—μ„ μ§μ ‘ ν‘ν„μ΄ λ¶κ°€ν•μ—¬, λ³„λ„μ **κ΄€κ³„ μ—”ν„°ν‹°**λ΅ ν•΄μ†ν•΄μ•Ό ν•©λ‹λ‹¤.
4.  **μ‹λ³„μ (Identifier)**: κ° μΈμ¤ν„΄μ¤λ¥Ό μ μΌν•κ² κµ¬λ¶„ν•λ” μ†μ„±(PK). **μ μΌμ„±, μµμ†μ„±, λ¶λ³€μ„±, μ΅΄μ¬μ„±**μ„ λ§μ΅±ν•΄μ•Ό ν•©λ‹λ‹¤. λ¶€λ¨μ μ‹λ³„μλ¥Ό μμ‹μ΄ μμ‹ μ PKλ΅ μ‚¬μ©ν•λ©΄ **μ‹λ³„ κ΄€κ³„**, μΌλ° μ†μ„±μΌλ΅ μ‚¬μ©ν•λ©΄ **λΉ„μ‹λ³„ κ΄€κ³„**κ°€ λ©λ‹λ‹¤.

---

### β… 2. μ—¬ν–‰ κ΄€λ¦¬ κΈ°λ¥ λ°μ΄ν„° λ¨λΈλ§

*   μ„μ λ°μ΄ν„° λ¨λΈλ§ μ›μΉ™μ— λ”°λΌ μ—¬ν–‰ κ΄€λ¦¬ κΈ°λ¥μ ν•µμ‹¬ μ—”ν„°ν‹°μΈ **`Trip`**κ³Ό μƒνƒλ¥Ό λ‚νƒ€λ‚΄λ” **`TripStatus` Enum**μ„ μ„¤κ³„ν–μµλ‹λ‹¤.

*   **`Trip` μ—”ν„°ν‹°**: μ—¬ν–‰μ μ λ©, κΈ°κ°„, μμ‚° λ“± ν•µμ‹¬ μ •λ³΄λ¥Ό κ΄€λ¦¬ν•λ©°, `User` μ—”ν„°ν‹°μ™€ **λ‹¤λ€μΌ(N:1) κ΄€κ³„**λ¥Ό λ§Ίμµλ‹λ‹¤.
*   **`TripRepository`**: `JpaRepository`λ¥Ό μƒμ†λ°›μ•„ `Trip` λ°μ΄ν„°μ κΈ°λ³Έμ μΈ CRUD μ—°μ‚°μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

---

### β… 3. QueryDSLμ„ ν™μ©ν• λ™μ  κ²€μƒ‰ κΈ°λ¥

*   μ‚¬μ©μμ λ‹¤μ–‘ν• κ²€μƒ‰ μ΅°κ±΄(μ—¬ν–‰ μƒνƒ, λ©μ μ§€ λ“±)κ³Ό μ •λ ¬ κΈ°μ¤€μ— λ”°λΌ μ—¬ν–‰ λ©λ΅μ„ μ΅°νν•  μ μλ„λ΅ **QueryDSL**μ„ λ„μ…ν•μ—¬ λ™μ  μΏΌλ¦¬ κΈ°λ¥μ„ κµ¬ν„ν–μµλ‹λ‹¤.

#### β• κµ¬ν„ μ μ°¨

1.  **μ„¤μ •**: `build.gradle`μ— QueryDSL μμ΅΄μ„±μ„ μ¶”κ°€ν•κ³ , `JPAQueryFactory`λ¥Ό BeanμΌλ΅ λ“±λ΅ν–μµλ‹λ‹¤.
2.  **μ»¤μ¤ν…€ Repository λ¶„λ¦¬**:
    *   `TripRepositoryCustom` μΈν„°νμ΄μ¤μ— λ™μ  μΏΌλ¦¬ λ©”μ„λ“λ¥Ό μ„ μ–Έν•©λ‹λ‹¤.
    *   `TripRepositoryImpl` κµ¬ν„μ²΄μ—μ„ `JPAQueryFactory`λ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤μ  λ™μ  μΏΌλ¦¬ λ΅μ§μ„ μ‘μ„±ν•©λ‹λ‹¤.
3.  **λ™μ  μΏΌλ¦¬ λ΅μ§**:
    *   **`TripSearchCondition` DTO**: ν΄λΌμ΄μ–ΈνΈμ κ²€μƒ‰ μ΅°κ±΄μ„ λ‹΄λ” κ°μ²΄μ…λ‹λ‹¤.
    *   **`where()` λ‹¤μ¤‘ νλΌλ―Έν„°**: `TripSearchCondition`μ ν•„λ“ κ°’μ΄ μ΅΄μ¬ν•  κ²½μ°μ—λ§ `where` μ μ— ν•΄λ‹Ή μ΅°κ±΄μ„ μ¶”κ°€ν•μ—¬ λ™μ μΌλ΅ μΏΌλ¦¬λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
    *   **`orderBy()`μ™€ `OrderSpecifier`**: κ²€μƒ‰ μ΅°κ±΄μ— ν¬ν•¨λ μ •λ ¬ κΈ°μ¤€μ— λ”°λΌ μ •λ ¬ μμ„λ¥Ό λ™μ μΌλ΅ λ³€κ²½ν•©λ‹λ‹¤.

---

### π“ μ”μ•½

*   λ°μ΄ν„° λ¨λΈλ§μ ν•µμ‹¬ κ°λ…μΈ **μ—”ν„°ν‹°, μ†μ„±, κ΄€κ³„, μ‹λ³„μ**λ¥Ό ν•™μµν•κ³ , μ΄λ¥Ό λ°”νƒ•μΌλ΅ **μ—¬ν–‰(Trip) μ—”ν„°ν‹°**λ¥Ό μ„¤κ³„ν–μµλ‹λ‹¤.
*   **QueryDSL**μ„ λ„μ…ν•μ—¬, μ‚¬μ©μμ λ‹¤μ–‘ν• κ²€μƒ‰ μ΅°κ±΄κ³Ό μ •λ ¬ κΈ°μ¤€μ— μ μ—°ν•κ² λ€μ‘ν•  μ μλ” **λ™μ  μΏΌλ¦¬** κΈ°λ¥μ„ κµ¬ν„ν–μµλ‹λ‹¤.
*   Repositoryμ μ—­ν• μ„ κΈ°λ³Έ CRUDμ™€ λ³µμ΅ν• λ™μ  μΏΌλ¦¬λ΅ λ¶„λ¦¬ν•μ—¬ μ½”λ“μ **μ μ§€λ³΄μμ„±κ³Ό ν™•μ¥μ„±**μ„ λ†’μ€μµλ‹λ‹¤.