## 0829 React Router: νμ΄μ§€ μ΄λ™κ³Ό λ™μ  λΌμ°ν…

---

### β… 1. κΈ°λ³Έ λΌμ°ν… μ„¤μ • λ° νμ΄μ§€ μ΄λ™

*   **React Router**λ” μ‹±κΈ€ νμ΄μ§€ μ• ν”λ¦¬μΌ€μ΄μ…(SPA)μ—μ„ μ‚¬μ©μκ°€ URLμ„ ν†µν•΄ μ—¬λ¬ νμ΄μ§€λ¥Ό μ΄λ™ν•λ” κ²ƒμ²λΌ λλΌκ² ν•΄μ£Όλ” λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤. μ‹¤μ λ΅λ” νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ν•μ§€ μ•κ³ , URLμ— λ§λ” μ»΄ν¬λ„νΈλ§ λ™μ μΌλ΅ λ λ”λ§ν•©λ‹λ‹¤.

#### β• 1-1. μ²« λ²μ§Έ λΌμ°ν… ν•κΈ° (`createBrowserRouter`)

*   μµμ‹  React Router(v6.4+)μ—μ„λ” `createBrowserRouter`λ¥Ό μ‚¬μ©ν•μ—¬ λΌμ°νΈ μ„¤μ •μ„ κ°μ²΄ ν•νƒλ΅ μ •μν•©λ‹λ‹¤.

    ```jsx
    // main.jsx λλ” App.jsx
    import { createBrowserRouter, RouterProvider } from 'react-router-dom';
    import HomePage from './pages/Home';
    import ProductsPage from './pages/Products';

    // 1. λΌμ°νΈ κ²½λ΅μ™€ λ λ”λ§ν•  μ»΄ν¬λ„νΈλ¥Ό λ°°μ—΄ κ°μ²΄λ΅ μ •μ
    const router = createBrowserRouter([
      { path: '/', element: <HomePage /> },
      { path: '/products', element: <ProductsPage /> },
    ]);

    // 2. RouterProviderλ¥Ό ν†µν•΄ μ•±μ— λΌμ°ν„° μ κ³µ
    ReactDOM.createRoot(document.getElementById('root')).render(
      <React.StrictMode>
        <RouterProvider router={router} />
      </React.StrictMode>
    );
    ```

#### β• 1-2. `Link`μ™€ `NavLink` μ‚¬μ©ν•κΈ°

*   **`<a>` νƒκ·Έλ¥Ό μ‚¬μ©ν•λ©΄ μ• λλ” μ΄μ **: `<a>` νƒκ·Έλ” μ „μ²΄ νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ν•μ—¬ SPAμ μ¥μ μ„ μ—†μ• λ²„λ¦½λ‹λ‹¤.

*   **`<Link>`**: νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ν•μ§€ μ•κ³ , μ§€μ •λ κ²½λ΅(`to`)λ΅ URLλ§ λ³€κ²½ν•μ—¬ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ νμ΄μ§€λ¥Ό μ „ν™ν•©λ‹λ‹¤.
    ```jsx
    import { Link } from 'react-router-dom';
    <Link to="/products">Go to Products</Link>
    ```

*   **`<NavLink>`**: `Link`μ νΉλ³„ν• λ²„μ „μΌλ΅, ν„μ¬ URLκ³Ό `to` propμ΄ μΌμΉν•  λ• νΉμ • μ¤νƒ€μΌμ΄λ‚ ν΄λμ¤λ¥Ό μ μ©ν•  μ μμµλ‹λ‹¤. μ£Όλ΅ λ„¤λΉ„κ²μ΄μ… λ°”μ—μ„ ν„μ¬ ν™μ„±ν™”λ λ©”λ‰΄λ¥Ό ν‘μ‹ν•  λ• μ‚¬μ©ν•©λ‹λ‹¤.
    ```jsx
    <NavLink
      to="/products"
      className={({ isActive }) => (isActive ? 'active-link' : undefined)}
    >
      Products
    </NavLink>
    ```

---

### β… 2. λ μ΄μ•„μ›ƒκ³Ό μ¤‘μ²© λΌμ°ν…

*   μ—¬λ¬ νμ΄μ§€μ—μ„ κ³µν†µμ μΌλ΅ μ‚¬μ©λλ” UI(ν—¤λ”, ν‘Έν„° λ“±)λ¥Ό **λ μ΄μ•„μ›ƒ λΌμ°νΈ**λ΅ λ§λ“¤μ–΄ μ½”λ“ μ¤‘λ³µμ„ μ¤„μΌ μ μμµλ‹λ‹¤.

1.  **λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈ μƒμ„±**: κ³µν†µ UIλ¥Ό ν¬ν•¨ν•κ³ , μμ‹ λΌμ°νΈκ°€ λ λ”λ§λ  μ„μΉμ— **`<Outlet />`** μ»΄ν¬λ„νΈλ¥Ό λ°°μΉν•©λ‹λ‹¤.
2.  **λΌμ°ν„° μ„¤μ •**: `children` μ†μ„±μ„ μ‚¬μ©ν•μ—¬ λΌμ°νΈλ¥Ό μ¤‘μ²©μ‹ν‚µλ‹λ‹¤.

    ```jsx
    // components/RootLayout.js
    import { Outlet } from 'react-router-dom';
    import MainNavigation from './MainNavigation';

    function RootLayout() {
      return (
        <>
          <MainNavigation />
          <main>
            <Outlet /> {/* μμ‹ λΌμ°νΈ μ»΄ν¬λ„νΈκ°€ μ—¬κΈ°μ— λ λ”λ§λ¨ */}
          </main>
        </>
      );
    }

    // λΌμ°ν„° μ„¤μ •
    const router = createBrowserRouter([
      {
        path: '/',
        element: <RootLayout />, // λ¶€λ¨ λ μ΄μ•„μ›ƒ
        children: [ // μμ‹ λΌμ°νΈλ“¤
          { path: '/', element: <HomePage /> },
          { path: '/products', element: <ProductsPage /> },
        ],
      },
    ]);
    ```

---

### β… 3. λ™μ  λΌμ°ν…: URL νλΌλ―Έν„°μ™€ μΏΌλ¦¬ μ¤νΈλ§

#### β• 3-1. URL νλΌλ―Έν„°λ΅ λΌμ°ν…ν•κΈ° (`useParams`)

*   μƒν’ μƒμ„Έ νμ΄μ§€μ²λΌ, νΉμ • IDμ— λ”°λΌ λ™μ μΌλ΅ νμ΄μ§€λ¥Ό μƒμ„±ν•΄μ•Ό ν•  λ• μ‚¬μ©ν•©λ‹λ‹¤.
*   **κ²½λ΅ μ„¤μ •**: κ²½λ΅μ— μ½λ΅ (`:`)μ„ μ‚¬μ©ν•μ—¬ λ™μ  μ„Έκ·Έλ¨ΌνΈλ¥Ό μ •μν•©λ‹λ‹¤. (`path: '/products/:productId'`)
*   **κ°’ μ½κΈ°**: `useParams` Hookμ„ μ‚¬μ©ν•μ—¬ URLμ λ™μ  νλΌλ―Έν„° κ°’μ„ κ°μ²΄λ΅ κ°€μ Έμµλ‹λ‹¤.

    ```jsx
    // pages/ProductDetail.js
    import { useParams } from 'react-router-dom';

    function ProductDetailPage() {
      const params = useParams(); // { productId: 'p1' } μ™€ κ°™μ€ κ°μ²΄ λ°ν™

      return <h1>Product Details for {params.productId}</h1>;
    }
    ```

#### β• 3-2. μΏΌλ¦¬ μ¤νΈλ§ μ½κ³  μƒμ„±ν•κΈ° (`useSearchParams`)

*   μ •λ ¬, ν•„ν„°λ§ λ“± μ„ νƒμ μΈ μµμ…μ„ URLμ— ν‘ν„ν•  λ• μ‚¬μ©ν•©λ‹λ‹¤. (`/products?sort=asc&filter=new`)
*   **`useSearchParams` Hook**: `[searchParams, setSearchParams]` ν•νƒμ λ°°μ—΄μ„ λ°ν™ν•©λ‹λ‹¤.
    *   `searchParams`: μΏΌλ¦¬ μ¤νΈλ§μ„ μ½λ” κ°μ²΄ (`searchParams.get('sort')`).
    *   `setSearchParams`: μΏΌλ¦¬ μ¤νΈλ§μ„ ν”„λ΅κ·Έλλ§¤ν‹±ν•κ² λ³€κ²½ν•λ” ν•¨μ.

    ```jsx
    // components/FilterComponent.js
    import { useSearchParams } from 'react--router-dom';

    function FilterComponent() {
      const [searchParams, setSearchParams] = useSearchParams();
      const currentSort = searchParams.get('sort') || 'default';

      const handleSortChange = (newSortOrder) => {
        // μΏΌλ¦¬ μ¤νΈλ§μ„ μ—…λ°μ΄νΈν•μ—¬ URL λ³€κ²½
        setSearchParams({ sort: newSortOrder });
      };

      return (
        <div>
          <p>Current sort order: {currentSort}</p>
          <button onClick={() => handleSortChange('asc')}>Sort Ascending</button>
          <button onClick={() => handleSortChange('desc')}>Sort Descending</button>
        </div>
      );
    }
    ```

---

### β… 4. μ—λ¬ μ²λ¦¬

*   μ΅΄μ¬ν•μ§€ μ•λ” κ²½λ΅λ΅ μ ‘κ·Όν•κ±°λ‚ λ°μ΄ν„° λ΅λ”©μ— μ‹¤ν¨ν–μ„ λ• λ³΄μ—¬μ¤„ μ»¤μ¤ν…€ μ—λ¬ νμ΄μ§€λ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤.

1.  **`errorElement` μ¶”κ°€**: λΌμ°νΈ μ„¤μ • κ°μ²΄μ— `errorElement` μ†μ„±μ„ μ¶”κ°€ν•©λ‹λ‹¤.
2.  **`useRouteError` Hook**: μ—λ¬ νμ΄μ§€ μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ΄ Hookμ„ μ‚¬μ©ν•μ—¬ λ°μƒν• μ—λ¬ κ°μ²΄μ— μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

    ```jsx
    // pages/Error.js
    import { useRouteError } from 'react-router-dom';

    function ErrorPage() {
      const error = useRouteError(); // μ—λ¬ κ°μ²΄ (status, data λ“± ν¬ν•¨)
      return (
        <>
          <h1>An error occurred!</h1>
          <p>{error.statusText || error.message}</p>
        </>
      );
    }

    // λΌμ°ν„° μ„¤μ • (μµμƒμ„ λΌμ°νΈμ— μ„¤μ •ν•λ©΄ λ¨λ“  ν•μ„ μ—λ¬λ¥Ό μ²λ¦¬)
    const router = createBrowserRouter([
      {
        path: '/',
        element: <RootLayout />,
        errorElement: <ErrorPage />, // μ—λ¬ λ°μƒ μ‹ μ΄ μ»΄ν¬λ„νΈ λ λ”λ§
        children: [ /* ... */ ],
      },
    ]);
    ```

---

### π“ μ”μ•½

*   **`createBrowserRouter`**μ™€ **`<RouterProvider>`**λ΅ λΌμ°ν…μ„ μ„¤μ •ν•κ³ , **`<Link>`**λ΅ νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ μ—†μ΄ μ΄λ™ν•©λ‹λ‹¤.
*   **`<Outlet />`**κ³Ό **`children`** μ†μ„±μ„ μ‚¬μ©ν•λ©΄ κ³µν†µ **λ μ΄μ•„μ›ƒ**μ„ κ°–λ” **μ¤‘μ²© λΌμ°ν…**μ„ μ‰½κ² κµ¬ν„ν•  μ μμµλ‹λ‹¤.
*   ν•„μμ μΈ λ™μ  λ°μ΄ν„°λ” **URL νλΌλ―Έν„°**(`useParams`)λ΅, μ„ νƒμ μΈ ν•„ν„°/μ •λ ¬ κ°’μ€ **μΏΌλ¦¬ μ¤νΈλ§**(`useSearchParams`)μΌλ΅ κ΄€λ¦¬ν•©λ‹λ‹¤.
*   **`errorElement`**μ™€ **`useRouteError`**λ¥Ό μ‚¬μ©ν•λ©΄ μ‚¬μ©μ μΉν™”μ μΈ μ—λ¬ νμ΄μ§€λ¥Ό μ κ³µν•μ—¬ μ• ν”λ¦¬μΌ€μ΄μ…μ μ•μ •μ„±μ„ λ†’μΌ μ μμµλ‹λ‹¤.